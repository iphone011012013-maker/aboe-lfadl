<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุนุจุฉ XO ุงูุนุตุฑูุฉ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ุงูุฃููุงุท ุงูุนุงูุฉ ูุฅุนุงุฏุฉ ุงูุถุจุท */
        * {
            box-sizing: border-box; /* ูุฌุนู ุฅุถุงูุฉ Padding ู Border ูุง ุชุฒูุฏ ูู ุงูุญุฌู ุงูููู ููุนูุตุฑ */
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif; /* ุงุณุชุฎุฏุงู ุงูุฎุท ุงูุฌุฏูุฏ */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh; /* ุชุฃูุฏ ุฃู ุงูุตูุญุฉ ุชุฃุฎุฐ ุงุฑุชูุงุน ุงูุดุงุดุฉ ุจุงููุงูู */
            background: linear-gradient(135deg, #a8e063, #56ab2f); /* ุฎูููุฉ ูุชุฏุฑุฌุฉ ุฎุถุฑุงุก ุฌุฐุงุจุฉ */
            color: #333;
            overflow: hidden; /* ููุน ุธููุฑ ุฃุดุฑุทุฉ ุงูุชูุฑูุฑ ุฅุฐุง ูุงู ุงููุญุชูู ุฃูุจุฑ ูู ุงูุดุงุดุฉ */
            padding: 20px; /* ุฅุถุงูุฉ ุจุนุถ ุงููุณุงูุฉ ูู ุงูุญูุงู */
        }

        /* ุฑุฃุณ ุงูุตูุญุฉ ุงูุฌุฏูุฏ ูุนุฑุถ ุงููุชุงุฆุฌ ูุงูุนููุงู */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 900px; /* ูุชุญุฏูุฏ ุฃูุตู ุนุฑุถ ููุฑุฃุณ ููุชูุงุณุจ ูุน ุชุฎุทูุท ุงูุตูุญุฉ */
            padding: 10px 20px;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.9); /* ุฎูููุฉ ุดุจู ุดูุงูุฉ */
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 10; /* ูุถูุงู ุธููุฑูุง ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
        }

        .game-header .score-display {
            font-size: 1.8em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .game-header .score-display.x-score {
            color: #e74c3c; /* ููู X */
        }

        .game-header .score-display.o-score {
            color: #2ecc71; /* ููู O */
        }

        .game-header h1 {
            color: #2c3e50;
            font-size: 2.2em; /* ุญุฌู ุฃุตุบุฑ ููููุงู ููุชูุงุณุจ ูู ุงูุฑุฃุณ */
            margin: 0; /* ุฅุฒุงูุฉ ุงููุงูุด ุงูุงูุชุฑุงุถู */
            text-align: center;
            flex-grow: 1; /* ููุณูุงุญ ุจุงูุนููุงู ุจุฃุฎุฐ ุงููุณุงุญุฉ ุงููุชุงุญุฉ ูู ุงูููุชุตู */
        }

        .game-container {
            background-color: #ffffff; /* ุฎูููุฉ ุจูุถุงุก ูุธููุฉ ููุญุงููุฉ ุงูุฑุฆูุณูุฉ */
            padding: 30px;
            border-radius: 15px; /* ุฒูุงูุง ูุณุชุฏูุฑุฉ */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); /* ุธู ูุงุนู */
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px; /* ูุณุงูุฉ ุจูู ุงูุนูุงุตุฑ ุฏุงุฎู ุงูุญุงููุฉ */
            width: 90%; /* ุนุฑุถ ูุฑู ููุญุงููุฉ */
            max-width: 400px; /* ุชุญุฏูุฏ ุฃูุตู ุนุฑุถ */
            z-index: 5; /* ูุถูุงู ุธููุฑูุง ููู ุฎูููุฉ ุงูุตูุญุฉ ูููู ุฃุณูู ุงูููุฏุงู */
        }

        /* ููุญุฉ ุงููุนุจุฉ (ุงูุดุจูุฉ) */
        #game-board {
            display: grid; /* ุงุณุชุฎุฏุงู Grid ูุฅูุดุงุก ุงูุดุจูุฉ 3x3 */
            grid-template-columns: repeat(3, 100px); /* 3 ุฃุนูุฏุฉ ุจุนุฑุถ 100 ุจูุณู ููู ูููุง */
            grid-template-rows: repeat(3, 100px); /* 3 ุตููู ุจุงุฑุชูุงุน 100 ุจูุณู ููู ูููุง */
            gap: 8px; /* ุงููุณุงูุฉ ุจูู ุงูุฎูุงูุง */
            background-color: #3498db; /* ููู ุฃุฒุฑู ุฌุฐุงุจ ูููุญุฉ */
            border-radius: 10px;
            padding: 10px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1); /* ุธู ุฏุงุฎูู ุฎููู */
        }

        .cell {
            width: 100px;
            height: 100px;
            background-color: #ecf0f1; /* ููู ูุงุชุญ ููุฎูุงูุง */
            display: flex; /* ูุชูููู ุชูุณูุท ุงููุญุชูู ุฏุงุฎู ุงูุฎููุฉ */
            justify-content: center; /* ุชูุณูุท ุฃููู */
            align-items: center; /* ุชูุณูุท ุนููุฏู */
            font-size: 3.5em; /* ุญุฌู ุฃูุจุฑ ููุนูุงูุงุช (X/O) */
            font-weight: bold;
            cursor: pointer; /* ูุฅุธูุงุฑ ุงููุคุดุฑ ููุฏ ุนูุฏ ุงููุฑูุฑ ููู ุงูุฎููุฉ */
            border-radius: 8px; /* ุฒูุงูุง ูุณุชุฏูุฑุฉ ููุฎูุงูุง */
            transition: background-color 0.3s ease, transform 0.1s ease; /* ุงูุชูุงูุงุช ูุงุนูุฉ ููุชูุงุนูุงุช */
            user-select: none; /* ููุน ุชุญุฏูุฏ ุงููุต ุฏุงุฎู ุงูุฎูุงูุง */
        }

        .cell:hover {
            background-color: #dde1e5; /* ููู ุฃุบูู ููููุงู ุนูุฏ ุงููุฑูุฑ ุจุงููุฃุฑุฉ */
            transform: scale(1.02); /* ุชุฃุซูุฑ ุชูุจูุฑ ุจุณูุท ุนูุฏ ุงููุฑูุฑ */
        }

        .cell.x {
            color: #e74c3c; /* ุฃุญูุฑ ูุงุฑู ูู X */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1); /* ุธู ุฎููู ูููุต ูุฌุนูู ูุจุฑุฒ */
        }

        .cell.o {
            color: #2ecc71; /* ุฃุฎุถุฑ ุฒูุฑุฏู ูู O */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* ุฑุณุงูุฉ ุงูุญุงูุฉ */
        #status-message {
            margin-top: 10px;
            font-size: 1.6em;
            font-weight: bold;
            color: #34495e;
            text-align: center;
            min-height: 1.5em; /* ูุถูุงู ุนุฏู ุญุฏูุซ ุชุบููุฑุงุช ูู ุงูุชุฎุทูุท (CLS) ุนูุฏ ุชุญุฏูุซ ุงููุต */
        }

        /* ุฃุฒุฑุงุฑ ุงูุชุญูู */
        .game-controls {
            display: flex;
            gap: 15px; /* ูุณุงูุฉ ุจูู ุงูุฃุฒุฑุงุฑ */
            flex-wrap: wrap; /* ููุณูุงุญ ููุฃุฒุฑุงุฑ ุจุงูุงูุชูุงู ูุณุทุฑ ุฌุฏูุฏ ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ */
            justify-content: center; /* ุชูุณูุท ุงูุฃุฒุฑุงุฑ */
        }

        .action-button {
            padding: 12px 25px;
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            background-color: #2980b9; /* ุฃุฒุฑู ุฏุงูู */
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* ุธู ููุฃุฒุฑุงุฑ */
        }

        .action-button:hover {
            background-color: #3498db;
            transform: translateY(-2px); /* ุชุฃุซูุฑ ุฑูุน ุจุณูุท ุนูุฏ ุงููุฑูุฑ */
        }

        .action-button:active {
            transform: translateY(0); /* ุชุฃุซูุฑ ุงูุถุบุท ุนูุฏ ุงูููุฑ */
        }

        /* ููุญุฉ ุงููุชุงุฆุฌ ุงูุณูููุฉ (ุงูููุตูุฉ) */
        .score-board {
            background-color: #f7f7f7; /* ุฎูููุฉ ุฃูุชุญ ููููุงู ูููุญุฉ ุงููุชุงุฆุฌ */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 100%; /* ุชุฃุฎุฐ ุนุฑุถ ุงูุญุงููุฉ ุงูุฃุจููุฉ */
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px; /* ูุณุงูุฉ ุจูู ููุญุฉ ุงููุชุงุฆุฌ ูููุญุฉ ุงููุนุจ */
        }

        .score-board h2 {
            color: #34495e;
            margin-bottom: 10px;
            font-size: 1.8em;
        }

        .score-stats, .win-rates {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap; /* ููุณูุงุญ ููุนูุงุตุฑ ุจุงูุงูุชูุงู ุฅูู ุณุทุฑ ุฌุฏูุฏ ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ */
            gap: 10px;
        }

        .score-board p {
            font-size: 1.1em;
            color: #555;
            margin: 0; /* ุฅุฒุงูุฉ ุงููุงูุด ุงูุงูุชุฑุงุถู ููููุฑุงุช */
            flex: 1; /* ููุณูุงุญ ุจุชูุฒูุน ูุชุณุงูู ูููุณุงูุงุช */
            min-width: 120px; /* ูุถูุงู ุนุฏู ุชุฏุงุฎู ุงููุตูุต */
        }

        .score-value {
            font-weight: bold;
            color: #0d6efd; /* ููู ุฃุฒุฑู ุบุงูู ููููู ุงูุฑูููุฉ */
            font-size: 1.2em;
        }

        .reset-button {
            background-color: #e74c3c; /* ููู ุฃุญูุฑ ูุฒุฑ ุฅุนุงุฏุฉ ุงูุถุจุท */
        }

        .reset-button:hover {
            background-color: #c0392b;
        }

        /* ุฃููุงุท ุงููุงูุฐุฉ ุงูููุจุซูุฉ (ุงูููุฏุงู) - ุนุงูุฉ ููู ุงูููุฏุงูุฒ */
        .modal-overlay {
            display: none; /* ูุฎูู ุงูุชุฑุงุถูุงู */
            position: fixed; /* ูุชุบุทูุฉ ุงูุดุงุดุฉ ุจุฃููููุง */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* ุฎูููุฉ ุฏุงููุฉ ุดุจู ุดูุงูุฉ */
            justify-content: center;
            align-items: center;
            z-index: 1000; /* ูุถูุงู ุธููุฑูุง ููู ูู ุดูุก ุขุฎุฑ */
            opacity: 0; /* ููุชุญูู ูู ุธููุฑูุง ูุฅุฎูุงุฆูุง ุจุงูุชูุงู ูุงุนู */
            transition: opacity 0.3s ease;
        }

        .modal-overlay.show {
            display: flex; /* ุฅุธูุงุฑ ุงูููุฏุงู */
            opacity: 1; /* ุฅุธูุงุฑ ุงูููุฏุงู */
        }

        .modal-content {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 90%;
            max-width: 350px;
            transform: translateY(-20px); /* ุชุฃุซูุฑ ุจุณูุท ุนูุฏ ุงูุธููุฑ */
            transition: transform 0.3s ease;
            position: relative; /* ูุชุญุฏูุฏ ููุถุน ุฒุฑ ุงูุฅุบูุงู */
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0); /* ุฅุนุงุฏุฉ ุงููุถุน ุงูุทุจูุนู ุนูุฏ ุงูุธููุฑ */
        }

        .modal-content p {
            font-size: 1.2em;
            margin-bottom: 25px;
            color: #34495e;
            font-weight: bold;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .modal-button {
            padding: 10px 20px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .modal-button.confirm {
            background-color: #e74c3c; /* ุฃุญูุฑ ููุชุฃููุฏ */
            color: white;
        }

        .modal-button.confirm:hover {
            background-color: #c0392b;
            transform: translateY(-1px);
        }

        .modal-button.cancel {
            background-color: #95a5a6; /* ุฑูุงุฏู ููุฅูุบุงุก */
            color: white;
        }

        .modal-button.cancel:hover {
            background-color: #7f8c8d;
            transform: translateY(-1px);
        }

        /* ุฒุฑ ุฅุบูุงู ุงูููุฏุงู */
        .close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
            transition: color 0.2s ease;
        }

        .close-button:hover {
            color: #333;
        }

        /* ุฃููุงุท ููุฏุงู ุงูุณุฌู */
        #historyModal .modal-content {
            max-width: 400px; /* ูููู ุฃู ูููู ุฃูุจุฑ ููููุงู ูุนุฑุถ ุงูุณุฌู */
        }
        #historyModal .history-stats p {
            margin-bottom: 10px;
            text-align: right; /* ูุญุงุฐุงุฉ ูููููู ูููุต ุงูุนุฑุจู */
            padding-right: 20px; /* ูุณุงูุฉ ุฏุงุฎููุฉ ูู ุงููููู */
        }
        #historyModal .history-stats p span {
            float: left; /* ุฌุนู ุงูุฃุฑูุงู ุชุทูู ุนูู ุงููุณุงุฑ */
            color: #0d6efd;
            font-weight: bold;
        }


        /* ุงุณุชุฌุงุจุฉ ุงูุชุตููู ููุดุงุดุงุช ุงูุฃุตุบุฑ (ุงูุฌูุงู) */
        @media (max-width: 600px) {
            .game-header {
                flex-direction: column; /* ุชุฑุชูุจ ุงูุนูุงุตุฑ ุนููุฏููุง */
                gap: 10px;
                padding: 10px;
                margin-bottom: 15px;
            }
            .game-header h1 {
                font-size: 1.8em;
            }
            .game-header .score-display {
                font-size: 1.4em;
            }

            #game-board {
                grid-template-columns: repeat(3, 80px); /* ุฎูุงูุง ุฃุตุบุฑ */
                grid-template-rows: repeat(3, 80px);
                gap: 6px;
            }

            .cell {
                width: 80px;
                height: 80px;
                font-size: 3em; /* ุญุฌู ุฎุท ุฃุตุบุฑ */
            }

            #status-message {
                font-size: 1.3em;
            }

            .action-button {
                padding: 10px 20px;
                font-size: 1em;
            }

            .game-container {
                padding: 20px;
            }

            .score-board p {
                font-size: 1em;
            }

            .modal-content {
                padding: 20px;
            }
            .modal-content p {
                font-size: 1em;
            }
            #historyModal .history-stats p {
                text-align: right;
                padding-right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="game-header">
        <div class="score-display x-score">
            X: <span id="headerScoreX">0</span>
        </div>
        <h1>ูุนุจุฉ XO</h1>
        <div class="score-display o-score">
            O: <span id="headerScoreO">0</span>
        </div>
    </div>

    <div class="game-container">
        <div id="game-board">
            <div class="cell" data-cell-index="0"></div>
            <div class="cell" data-cell-index="1"></div>
            <div class="cell" data-cell-index="2"></div>
            <div class="cell" data-cell-index="3"></div>
            <div class="cell" data-cell-index="4"></div>
            <div class="cell" data-cell-index="5"></div>
            <div class="cell" data-cell-index="6"></div>
            <div class="cell" data-cell-index="7"></div>
            <div class="cell" data-cell-index="8"></div>
        </div>

        <div id="status-message">ุฏูุฑ ุงููุงุนุจ X</div>

        <div class="game-controls">
            <button id="restart-button" class="action-button">ุฌููุฉ ุฌุฏูุฏุฉ</button>
            <button id="show-history-button" class="action-button">ุงูุณุฌู</button>
            <button id="reset-scores-button" class="action-button reset-button">ุญุฐู ุงููุชุงุฆุฌ</button>
        </div>

        <div class="score-board">
            <h2>ุงููุชุงุฆุฌ ุงูููุตูุฉ</h2>
            <div class="score-stats">
                <p>ููุฒ X: <span id="scoreX" class="score-value">0</span></p>
                <p>ููุฒ O: <span id="scoreO" class="score-value">0</span></p>
                <p>ุชุนุงุฏู: <span id="scoreDraws" class="score-value">0</span></p>
                <p>ูุฌููุน ุงูุฃูุนุงุจ: <span id="totalGames" class="score-value">0</span></p>
            </div>
            <div class="win-rates">
                <p>ูุณุจุฉ ููุฒ X: <span id="winRateX" class="score-value">0%</span></p>
                <p>ูุณุจุฉ ููุฒ O: <span id="winRateO" class="score-value">0%</span></p>
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal-overlay">
        <div class="modal-content">
            <p>ูู ุฃูุช ูุชุฃูุฏ ุฃูู ุชุฑูุฏ ุญุฐู ุฌููุน ุงููุชุงุฆุฌ ูุจุฏุก ูุจุงุฑุงุฉ ุฌุฏูุฏุฉุ</p>
            <div class="modal-buttons">
                <button id="confirmResetButton" class="modal-button confirm">ุชุฃููุฏ</button>
                <button id="cancelResetButton" class="modal-button cancel">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <div id="historyModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-button" id="closeHistoryModal">&times;</button>
            <h2>ุณุฌู ุงููุชุงุฆุฌ</h2>
            <div class="history-stats score-stats">
                <p>ููุฒ X: <span id="historyScoreX" class="score-value">0</span></p>
                <p>ููุฒ O: <span id="historyScoreO" class="score-value">0</span></p>
                <p>ุชุนุงุฏู: <span id="historyScoreDraws" class="score-value">0</span></p>
                <p>ูุฌููุน ุงูุฃูุนุงุจ: <span id="historyTotalGames" class="score-value">0</span></p>
                <p>ูุณุจุฉ ููุฒ X: <span id="historyWinRateX" class="score-value">0%</span></p>
                <p>ูุณุจุฉ ููุฒ O: <span id="historyWinRateO" class="score-value">0%</span></p>
            </div>
            <div class="modal-buttons">
                <button id="deleteHistoryButton" class="modal-button confirm delete">ุญุฐู</button>
                <button id="closeHistoryButton" class="modal-button cancel">ุฅุบูุงู</button>
            </div>
        </div>
    </div>


    <script>
        // ุฌูุจ ุนูุงุตุฑ HTML ุงูุชู ุณูุชูุงุนู ูุนูุง ุจุงุณุชุฎุฏุงู ูุนุฑูุงุชูุง (IDs)
        const cells = document.querySelectorAll('.cell'); // ุฌููุน ุฎูุงูุง ููุญุฉ ุงููุนุจ (ุนูุงุตุฑ div ุฐุงุช ุงููุฆุฉ 'cell')
        const statusMessage = document.getElementById('status-message'); // ุฑุณุงูุฉ ุงูุญุงูุฉ (ุฏูุฑ ุงููุงุนุจุ ุงูููุฒุ ุงูุชุนุงุฏู)
        const restartButton = document.getElementById('restart-button'); // ุฒุฑ ุฅุนุงุฏุฉ ุงููุนุจ (ุงูุขู "ุฌููุฉ ุฌุฏูุฏุฉ")
        const showHistoryButton = document.getElementById('show-history-button'); // ุฒุฑ "ุงูุณุฌู" ุงูุฌุฏูุฏ
        const resetScoresButton = document.getElementById('reset-scores-button'); // ุฒุฑ ุฅุนุงุฏุฉ ุถุจุท ุงููุชุงุฆุฌ (ุงูุขู "ุญุฐู ุงููุชุงุฆุฌ")

        // ุนูุงุตุฑ ุนุฑุถ ุงููุชุงุฆุฌ ูู ุฑุฃุณ ุงูุตูุญุฉ
        const headerScoreXSpan = document.getElementById('headerScoreX');
        const headerScoreOSpan = document.getElementById('headerScoreO');

        // ุนูุงุตุฑ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ููุชุฃููุฏ (ุงูููุฏุงู)
        const confirmModal = document.getElementById('confirmModal');
        const confirmResetButton = document.getElementById('confirmResetButton');
        const cancelResetButton = document.getElementById('cancelResetButton');

        // ุนูุงุตุฑ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ููุณุฌู (ุงูููุฏุงู ุงูุฌุฏูุฏ)
        const historyModal = document.getElementById('historyModal');
        const closeHistoryModalButton = document.getElementById('closeHistoryModal'); // ุฒุฑ ุฅุบูุงู ุงูู X
        const closeHistoryButton = document.getElementById('closeHistoryButton'); // ุฒุฑ "ุฅุบูุงู" ูู ุงูููุฏุงู

        // *** ุงูุนูุตุฑ ุงูุฌุฏูุฏ ูุฒุฑ "ุญุฐู" ูู ููุฏุงู ุงูุณุฌู ***
        const deleteHistoryButton = document.getElementById('deleteHistoryButton'); //


        // ุนูุงุตุฑ ููุญุฉ ุงููุชุงุฆุฌ ุงูููุตูุฉ (ุงูุชู ูุชู ุนุฑุถูุง ุฃูุถูุง ูู ููุฏุงู ุงูุณุฌู)
        const scoreXSpan = document.getElementById('scoreX'); // ูุฐุง ุงูุนูุตุฑ ูู ูุนุฏ ูุนุฑุถ ูู ููุงู ุธุงูุฑ ุจุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูููู ูุณุชุฎุฏู ูุชุญุฏูุซ ุงูุณุฌู ุงูุฏุงุฎูู
        const scoreOSpan = document.getElementById('scoreO');
        const scoreDrawsSpan = document.getElementById('scoreDraws');
        const totalGamesSpan = document.getElementById('totalGames');
        const winRateXSpan = document.getElementById('winRateX');
        const winRateOSpan = document.getElementById('winRateO');

        const historyScoreX = document.getElementById('historyScoreX');
        const historyScoreO = document.getElementById('historyScoreO');
        const historyScoreDraws = document.getElementById('historyScoreDraws');
        const historyTotalGames = document.getElementById('historyTotalGames');
        const historyWinRateX = document.getElementById('historyWinRateX');
        const historyWinRateO = document.getElementById('historyWinRateO');


        // ุญุงูุฉ ุงููุนุจุฉ ุงูุญุงููุฉ
        let gameBoard = ['', '', '', '', '', '', '', '', '']; // ููุซู 9 ุฎุงูุงุช ูููุญุฉ ุงููุนุจุ ูุงุฑุบุฉ ูู ุงูุจุฏุงูุฉ
        let currentPlayer = 'X'; // ุงููุงุนุจ ุงูุญุงููุ ูุจุฏุฃ ุจู 'X'
        let isGameActive = true; // ุนูุงูุฉ ููุทููุฉ ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงููุนุจุฉ ูุง ุฒุงูุช ููุฏ ุงููุนุจ ุฃู ุงูุชูุช

        // ูุงุฆู ูุชุฎุฒูู ูุชุงุฆุฌ ุงููุงุนุจูู ูุงูุชุนุงุฏูุงุช
        let scores = {
            X: 0,
            O: 0,
            draws: 0,
            total: 0 // ูุฐุง ุณูุชู ุญุณุงุจู ุฏููุงูููููุง ูู X, O, draws
        };

        // ุฌููุน ุญุงูุงุช ุงูููุฒ ุงูููููุฉ (ุซูุงุซุฉ ูู ุตู ุฃู ุนููุฏ ุฃู ูุทุฑ)
        const winningConditions = [
            [0, 1, 2], // ุงูุตู ุงูุนููู
            [3, 4, 5], // ุงูุตู ุงูุฃูุณุท
            [6, 7, 8], // ุงูุตู ุงูุณููู
            [0, 3, 6], // ุงูุนููุฏ ุงูุฃูุณุฑ
            [1, 4, 7], // ุงูุนููุฏ ุงูุฃูุณุท
            [2, 5, 8], // ุงูุนููุฏ ุงูุฃููู
            [0, 4, 8], // ุงููุทุฑ ูู ุฃุนูู ุงููุณุงุฑ ุฅูู ุฃุณูู ุงููููู
            [2, 4, 6]  // ุงููุทุฑ ูู ุฃุนูู ุงููููู ุฅูู ุฃุณูู ุงููุณุงุฑ
        ];

        // --- ูุธุงุฆู ุฅุฏุงุฑุฉ ุงููุชุงุฆุฌ ูุญูุธูุง ูู Local Storage ---

        // ูุธููุฉ ูุชุญููู ุงููุชุงุฆุฌ ูู Local Storage ุนูุฏ ุจุฏุก ุชุดุบูู ุงููุนุจุฉ
        function loadScores() {
            try {
                const storedScores = localStorage.getItem('xoScores'); // ุฌูุจ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ุจุงุณู 'xoScores'
                if (storedScores) {
                    const parsedScores = JSON.parse(storedScores);
                    // ุงูุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุฎุตุงุฆุต ููุฌูุฏุฉ ูู ุงููุงุฆู ุงููุญูู
                    scores.X = parsedScores.X || 0;
                    scores.O = parsedScores.O || 0;
                    scores.draws = parsedScores.draws || 0;
                    // Total ุณูุชู ุชุญุฏูุซู ุชููุงุฆููุง ูู updateScoreBoard
                }
            } catch (e) {
                console.error("ุฎุทุฃ ูู ุชุญููู ุงููุชุงุฆุฌ ูู Local Storage:", e); // ุชุณุฌูู ุงูุฎุทุฃ ุฅุฐุง ุญุฏุซ
                // ูู ุญุงูุฉ ูุฌูุฏ ุฎุทุฃุ ูููู ุจุชููุฆุฉ ุงููุชุงุฆุฌ ูุถูุงู ุงุณุชูุฑุงุฑูุฉ ุงููุนุจุฉ
                scores = { X: 0, O: 0, draws: 0, total: 0 };
            }
            updateScoreBoard(); // ุชุญุฏูุซ ููุญุฉ ุงููุชุงุฆุฌ ูู ุงููุงุฌูุฉ ุจุนุฏ ุงูุชุญููู
        }

        // ูุธููุฉ ูุญูุธ ุงููุชุงุฆุฌ ุงูุญุงููุฉ ูู Local Storage
        function saveScores() {
            localStorage.setItem('xoScores', JSON.stringify(scores)); // ุชุญููู ูุงุฆู ุงููุชุงุฆุฌ ุฅูู ูุต ูุญูุธู
        }

        // ูุธููุฉ ูุชุญุฏูุซ ุนุฑุถ ุงููุชุงุฆุฌ ุนูู ููุญุฉ ุงููุชุงุฆุฌ ูู ุงููุงุฌูุฉ (ุฑุฆูุณู ูููุตู ูุณุฌู)
        function updateScoreBoard() {
            // ุชุญุฏูุซ ุงููุชุงุฆุฌ ูู ููุญุฉ ุงููุชุงุฆุฌ ุงูููุตูุฉ ุงูุณูููุฉ (ุฅุฐุง ูุงูุช ูุฑุฆูุฉ)
            scoreXSpan.textContent = scores.X;
            scoreOSpan.textContent = scores.O;
            scoreDrawsSpan.textContent = scores.draws;

            // ุชุญุฏูุซ ุงููุชุงุฆุฌ ูู ุฑุฃุณ ุงูุตูุญุฉ
            headerScoreXSpan.textContent = scores.X;
            headerScoreOSpan.textContent = scores.O;

            // ุญุณุงุจ ุฅุฌูุงูู ุงูุฃูุนุงุจ
            scores.total = scores.X + scores.O + scores.draws;
            totalGamesSpan.textContent = scores.total;
            historyTotalGames.textContent = scores.total; // ุชุญุฏูุซ ูู ููุฏุงู ุงูุณุฌู ุฃูุถุงู

            // ุญุณุงุจ ูุณุจุฉ ุงูููุฒ ููู ูุงุนุจ (ูุน ุชุฌูุจ ุงููุณูุฉ ุนูู ุตูุฑ)
            const winRateX = (scores.total > 0) ? ((scores.X / scores.total) * 100).toFixed(1) : 0;
            const winRateO = (scores.total > 0) ? ((scores.O / scores.total) * 100).toFixed(1) : 0;

            winRateXSpan.textContent = `${winRateX}%`;
            winRateOSpan.textContent = `${winRateO}%`;

            // ุชุญุฏูุซ ุงููุชุงุฆุฌ ูู ููุฏุงู ุงูุณุฌู
            historyScoreX.textContent = scores.X;
            historyScoreO.textContent = scores.O;
            historyScoreDraws.textContent = scores.draws;
            historyWinRateX.textContent = `${winRateX}%`;
            historyWinRateO.textContent = `${winRateO}%`;
        }

        // ูุธููุฉ ูุฅุนุงุฏุฉ ุถุจุท ุฌููุน ุงููุชุงุฆุฌ ุฅูู ุงูุตูุฑ (ุจุนุฏ ุงูุชุฃููุฏ)
        function resetScoresConfirmed() {
            scores = {
                X: 0,
                O: 0,
                draws: 0,
                total: 0
            };
            saveScores(); // ุญูุธ ุงููุชุงุฆุฌ ุงููุนุงุฏ ุถุจุทูุง ูู Local Storage
            updateScoreBoard(); // ุชุญุฏูุซ ุนุฑุถ ุงููุชุงุฆุฌ ูู ุงููุงุฌูุฉ
            restartGame(); // ุจุฏุก ูุนุจุฉ ุฌุฏูุฏุฉ ุจุนุฏ ุฅุนุงุฏุฉ ุถุจุท ุงููุชุงุฆุฌ
        }

        // --- ูุธุงุฆู ุงููุงูุฐุฉ ุงูููุจุซูุฉ (ุงูููุฏุงู) ---

        // ูุธููุฉ ูุฅุธูุงุฑ ุงููุงูุฐุฉ ุงูููุจุซูุฉ
        function showModal(modalElement) {
            modalElement.style.display = 'flex'; // ุงุฌุนู ุงูููุฏุงู ูุฑุฆูุงู
            setTimeout(() => { // ุฅุถุงูุฉ ุชุฃุฎูุฑ ุจุณูุท ูุชุทุจูู ุงูุชูุงู ุงูุดูุงููุฉ
                modalElement.classList.add('show');
            }, 10);
        }

        // ูุธููุฉ ูุฅุฎูุงุก ุงููุงูุฐุฉ ุงูููุจุซูุฉ
        function hideModal(modalElement) {
            modalElement.classList.remove('show');
            setTimeout(() => { // ุฅุฎูุงุก ุงูููุฏุงู ุจุนุฏ ุงูุชูุงุก ุงูุชูุงู ุงูุดูุงููุฉ
                modalElement.style.display = 'none';
            }, 300); // ูุฌุจ ุฃู ุชุชูุงูู ูุน ูุฏุฉ ุงูุงูุชูุงู ูู CSS
        }

        // --- ูุธุงุฆู ููุทู ุงููุนุจุฉ ---

        // ูุธููุฉ ุงูุชุนุงูู ูุน ุงูููุฑ ุนูู ุงูุฎููุฉ
        function handleCellClick(event) {
            const clickedCell = event.target; // ุงูุฎููุฉ ุงูุชู ุชู ุงูููุฑ ุนูููุง (ุนูุตุฑ DOM)
            // ุงูุญุตูู ุนูู ููุฑุณ ุงูุฎููุฉ ูู ุฎุงุตูุฉ 'data-cell-index'
            const clickedCellIndex = parseInt(clickedCell.getAttribute('data-cell-index'));

            // ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ูุดุบููุฉ ุจุงููุนู ุฃู ุงููุนุจุฉ ุบูุฑ ูุดุทุฉ
            if (gameBoard[clickedCellIndex] !== '' || !isGameActive) {
                return; // ูุง ุชูุนู ุดูุฆูุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ููุชูุฆุฉ ุฃู ุงููุนุจุฉ ุงูุชูุช
            }

            // ุชุญุฏูุซ ุญุงูุฉ ููุญุฉ ุงููุนุจ ุงูุฏุงุฎููุฉ ููุงุฌูุฉ ุงููุณุชุฎุฏู
            gameBoard[clickedCellIndex] = currentPlayer; // ูุถุน ุนูุงูุฉ ุงููุงุนุจ ุงูุญุงูู ูู ุงูููุญุฉ
            clickedCell.textContent = currentPlayer; // ุนุฑุถ ุนูุงูุฉ ุงููุงุนุจ ูู ุงูุฎููุฉ
            clickedCell.classList.add(currentPlayer.toLowerCase()); // ุฅุถุงูุฉ ูุฆุฉ 'x' ุฃู 'o' ูุชุทุจูู ุงูููู (ูู CSS)

            checkResult(); // ุงูุชุญูู ููุง ุฅุฐุง ูุงู ููุงู ูุงุฆุฒ ุฃู ุชุนุงุฏู ุจุนุฏ ูุฐู ุงูุญุฑูุฉ
        }

        // ูุธููุฉ ุงูุชุญูู ูู ูุชูุฌุฉ ุงููุนุจุฉ (ููุฒ ุฃู ุชุนุงุฏู)
        function checkResult() {
            let roundWon = false; // ุนูุงูุฉ ููุทููุฉ ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงูุฌููุฉ ูุฏ ูุงุฒุช

            // ุงูุชุญูู ูู ุฌููุน ุญุงูุงุช ุงูููุฒ ุงููุญุชููุฉ
            for (let i = 0; i < winningConditions.length; i++) {
                const winCondition = winningConditions[i]; // ุญุงูุฉ ููุฒ ูุนููุฉ (ูุซู [0, 1, 2])
                // ุฌูุจ ููู ุงูุฎูุงูุง ูู ุญุงูุฉ ุงูููุฒ ูุฐู ูู gameBoard
                let a = gameBoard[winCondition[0]];
                let b = gameBoard[winCondition[1]];
                let c = gameBoard[winCondition[2]];

                // ุฅุฐุง ูุงูุช ุฃู ูู ุงูุฎูุงูุง ูุงุฑุบุฉุ ููุง ูููู ุฃู ูููู ููุงู ููุฒ ูู ูุฐู ุงูุญุงูุฉ
                if (a === '' || b === '' || c === '') {
                    continue; // ุงูุงูุชูุงู ุฅูู ุญุงูุฉ ุงูููุฒ ุงูุชุงููุฉ
                }

                // ุฅุฐุง ูุงูุช ุฌููุน ุงูุฎูุงูุง ูุชุทุงุจูุฉุ ููุฐุง ูุนูู ุฃู ุงููุงุนุจ ุงูุญุงูู ูุฏ ูุงุฒ
                if (a === b && b === c) {
                    roundWon = true;
                    break; // ุงูุฎุฑูุฌ ูู ุงูุญููุฉ ุจูุฌุฑุฏ ุงูุนุซูุฑ ุนูู ููุฒ
                }
            }

            // ุฅุฐุง ูุงุฒ ุงููุงุนุจ ุงูุญุงูู
            if (roundWon) {
                statusMessage.textContent = `ุงููุงุนุจ ${currentPlayer} ูุงุฒ! ๐`;
                isGameActive = false; // ุฅููุงู ุงููุนุจุฉ
                scores[currentPlayer]++; // ุฒูุงุฏุฉ ูุชูุฌุฉ ุงููุงุนุจ ุงููุงุฆุฒ (scores.X ุฃู scores.O)
                saveScores(); // ุญูุธ ุงููุชุงุฆุฌ ุงูุฌุฏูุฏุฉ ูู Local Storage
                updateScoreBoard(); // ุชุญุฏูุซ ุนุฑุถ ุงููุชุงุฆุฌ ูู ุงููุงุฌูุฉ
                return; // ุฅููุงุก ุงููุธููุฉ ุจุนุฏ ุฅุนูุงู ุงููุงุฆุฒ
            }

            // ุงูุชุญูู ูู ุงูุชุนุงุฏู (ุฅุฐุง ูุงูุช ุฌููุน ุงูุฎูุงูุง ููุชูุฆุฉ ููู ููุฒ ุฃุญุฏ)
            let roundDraw = !gameBoard.includes(''); // true ุฅุฐุง ูู ููู ููุงู ุฃู ุฎุงูุฉ ูุงุฑุบุฉ ูู gameBoard
            if (roundDraw) {
                statusMessage.textContent = 'ุชุนุงุฏู! ๐ค';
                isGameActive = false; // ุฅููุงู ุงููุนุจุฉ
                scores.draws++; // ุฒูุงุฏุฉ ูุชูุฌุฉ ุงูุชุนุงุฏู
                saveScores(); // ุญูุธ ุงููุชุงุฆุฌ ุงูุฌุฏูุฏุฉ ูู Local Storage
                updateScoreBoard(); // ุชุญุฏูุซ ุนุฑุถ ุงููุชุงุฆุฌ ูู ุงููุงุฌูุฉ
                return; // ุฅููุงุก ุงููุธููุฉ ุจุนุฏ ุฅุนูุงู ุงูุชุนุงุฏู
            }

            // ุฅุฐุง ูู ููุฒ ุฃุญุฏ ููู ููู ููุงู ุชุนุงุฏูุ ูุบูุฑ ุฏูุฑ ุงููุงุนุจ
            changePlayer();
        }

        // ูุธููุฉ ุชุบููุฑ ุงููุงุนุจ ุงูุญุงูู
        function changePlayer() {
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X'; // ุชุจุฏูู ุงููุงุนุจ ูู X ุฅูู O ุฃู ุงูุนูุณ
            statusMessage.textContent = `ุฏูุฑ ุงููุงุนุจ ${currentPlayer}`; // ุชุญุฏูุซ ุฑุณุงูุฉ ุงูุญุงูุฉ ูู ุงููุงุฌูุฉ
        }

        // ูุธููุฉ ุฅุนุงุฏุฉ ุชุดุบูู ุงููุนุจุฉ
        function restartGame() {
            gameBoard = ['', '', '', '', '', '', '', '', '']; // ูุณุญ ููุญุฉ ุงููุนุจ ุงูุฏุงุฎููุฉ
            currentPlayer = 'X'; // ุฅุนุงุฏุฉ ุชุนููู ุงููุงุนุจ ุงูุญุงูู ุฅูู X
            isGameActive = true; // ุชูุนูู ุงููุนุจุฉ ูุฑุฉ ุฃุฎุฑู
            statusMessage.textContent = 'ุฏูุฑ ุงููุงุนุจ X'; // ุฅุนุงุฏุฉ ุชุนููู ุฑุณุงูุฉ ุงูุญุงูุฉ

            // ูุณุญ ูุญุชูู ุฌููุน ุงูุฎูุงูุง ูุฅุฒุงูุฉ ูุฆุงุช ุงูููู (x ู o) ูู ุงููุงุฌูุฉ
            cells.forEach(cell => {
                cell.textContent = ''; // ูุณุญ ุงููุต (X ุฃู O)
                cell.classList.remove('x', 'o'); // ุฅุฒุงูุฉ ูุฆุงุช CSS ุงูุชู ุชุญุฏุฏ ุงูุฃููุงู
            });
        }

        // --- ุฅุถุงูุฉ ูุณุชูุนู ุงูุฃุญุฏุงุซ ููุนูุงุตุฑ ุงูุชูุงุนููุฉ ---

        // ุฅุถุงูุฉ ูุณุชูุน ูุญุฏุซ ุงูููุฑ ููู ุฎููุฉ ูู ููุญุฉ ุงููุนุจ
        cells.forEach(cell => cell.addEventListener('click', handleCellClick));
        // ุฅุถุงูุฉ ูุณุชูุน ูุญุฏุซ ุงูููุฑ ูุฒุฑ ุฅุนุงุฏุฉ ุงููุนุจ (ุงูุขู "ุฌููุฉ ุฌุฏูุฏุฉ")
        restartButton.addEventListener('click', restartGame);
        // ุฅุถุงูุฉ ูุณุชูุน ูุฒุฑ "ุงูุณุฌู" ุงูุฌุฏูุฏ ููุชุญ ููุฏุงู ุงูุณุฌู
        showHistoryButton.addEventListener('click', () => {
            updateScoreBoard(); // ุงูุชุฃูุฏ ูู ุชุญุฏูุซ ุงูุจูุงูุงุช ูุจู ุนุฑุถ ุงูููุฏุงู
            showModal(historyModal);
        });
        // ุฅุถุงูุฉ ูุณุชูุน ูุญุฏุซ ุงูููุฑ ูุฒุฑ ุฅุนุงุฏุฉ ุถุจุท ุงููุชุงุฆุฌ (ุงูุขู ููุชุญ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ููุชุฃููุฏ)
        // ูุฐุง ูู ุงูุฒุฑ ุงูุฐู ูููู ุจู "ุญุฐู ุงููุชุงุฆุฌ"
        resetScoresButton.addEventListener('click', () => showModal(confirmModal));

        // ูุณุชูุนู ุฃุญุฏุงุซ ุฃุฒุฑุงุฑ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ููุชุฃููุฏ
        confirmResetButton.addEventListener('click', () => {
            resetScoresConfirmed(); // ุชูููุฐ ุฅุนุงุฏุฉ ุถุจุท ุงููุชุงุฆุฌ ุนูุฏ ุงูุชุฃููุฏ
            hideModal(confirmModal); // ุฅุฎูุงุก ุงููุงูุฐุฉ ุงูููุจุซูุฉ
        });

        cancelResetButton.addEventListener('click', () => hideModal(confirmModal)); // ุฅุฎูุงุก ุงููุงูุฐุฉ ุงูููุจุซูุฉ ุนูุฏ ุงูุฅูุบุงุก

        // ูุณุชูุนู ุฃุญุฏุงุซ ุฃุฒุฑุงุฑ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ููุณุฌู
        closeHistoryModalButton.addEventListener('click', () => hideModal(historyModal)); // ุฒุฑ ุงูุฅุบูุงู X
        closeHistoryButton.addEventListener('click', () => hideModal(historyModal)); // ุฒุฑ "ุฅุบูุงู"

        // *** ูุณุชูุน ุญุฏุซ ูุฒุฑ "ุญุฐู" ุงูุฌุฏูุฏ ูู ููุฏุงู ุงูุณุฌู ***
        deleteHistoryButton.addEventListener('click', () => { //
            hideModal(historyModal); // ุฅุฎูุงุก ููุฏุงู ุงูุณุฌู
            showModal(confirmModal); // ุฅุธูุงุฑ ููุฏุงู ุงูุชุฃููุฏ
        });

        // --- ุชููุฆุฉ ุงููุนุจุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ ---
        // ุชุญููู ุงููุชุงุฆุฌ ุงููุญููุธุฉ ุนูุฏ ุจุฏุก ุชุดุบูู ุงููุนุจุฉ ูุฃูู ูุฑุฉ
        loadScores();
    </script>
</body>
</html>